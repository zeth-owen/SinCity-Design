{"ast":null,"code":"import{createContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export const CurrentUser=/*#__PURE__*/createContext();function CurrentUserProvider(_ref){let{children}=_ref;const[currentUser,setCurrentUser]=useState(null);useEffect(()=>{const getLoggedInUser=async()=>{try{const token=localStorage.getItem('token');if(token){const response=await fetch('http://localhost:4000/auth/profile',{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const user=await response.json();console.log('User retrieved from backend:',user);setCurrentUser(user);}else{setCurrentUser(null);}}else{setCurrentUser(null);}}catch(error){console.error('Error fetching logged-in user:',error);setCurrentUser(null);}};getLoggedInUser();},[]);const logout=()=>{localStorage.removeItem('token');setCurrentUser(null);};return/*#__PURE__*/_jsx(CurrentUser.Provider,{value:{currentUser,setCurrentUser,logout},children:children});}export{CurrentUserProvider};","map":{"version":3,"names":["createContext","useState","useEffect","jsx","_jsx","CurrentUser","CurrentUserProvider","_ref","children","currentUser","setCurrentUser","getLoggedInUser","token","localStorage","getItem","response","fetch","headers","ok","user","json","console","log","error","logout","removeItem","Provider","value"],"sources":["/Users/zeththomas/Documents/sincity-media/client/src/contexts/CurrentUser.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\n\nexport const CurrentUser = createContext();\n\nfunction CurrentUserProvider({ children }) {\n  const [currentUser, setCurrentUser] = useState(null);\n\n  useEffect(() => {\n    const getLoggedInUser = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        if (token) {\n          const response = await fetch('http://localhost:4000/auth/profile', {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          if (response.ok) {\n            const user = await response.json();\n            console.log('User retrieved from backend:', user);\n            setCurrentUser(user); \n          } else {\n            setCurrentUser(null);\n          }\n        } else {\n          setCurrentUser(null);\n        }\n      } catch (error) {\n        console.error('Error fetching logged-in user:', error);\n        setCurrentUser(null);\n      }\n    };\n    getLoggedInUser();\n  }, []);\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    setCurrentUser(null);\n  };\n\n  return (\n    <CurrentUser.Provider value={{ currentUser, setCurrentUser, logout }}>\n      {children}\n    </CurrentUser.Provider>\n  );\n}\n\nexport { CurrentUserProvider };\n\n\n\n\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE3D,MAAO,MAAM,CAAAC,WAAW,cAAGL,aAAa,CAAC,CAAC,CAE1C,QAAS,CAAAM,mBAAmBA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAEpDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAS,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACT,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oCAAoC,CAAE,CACjEC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUL,KAAK,EAClC,CACF,CAAC,CAAC,CACF,GAAIG,QAAQ,CAACG,EAAE,CAAE,CACf,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClCC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAEH,IAAI,CAAC,CACjDT,cAAc,CAACS,IAAI,CAAC,CACtB,CAAC,IAAM,CACLT,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAC,IAAM,CACLA,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAE,MAAOa,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtDb,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAC,CACDC,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAa,MAAM,CAAGA,CAAA,GAAM,CACnBX,YAAY,CAACY,UAAU,CAAC,OAAO,CAAC,CAChCf,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,mBACEN,IAAA,CAACC,WAAW,CAACqB,QAAQ,EAACC,KAAK,CAAE,CAAElB,WAAW,CAAEC,cAAc,CAAEc,MAAO,CAAE,CAAAhB,QAAA,CAClEA,QAAQ,CACW,CAAC,CAE3B,CAEA,OAASF,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}