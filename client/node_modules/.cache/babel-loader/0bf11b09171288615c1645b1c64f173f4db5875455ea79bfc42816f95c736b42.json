{"ast":null,"code":"import React,{useState}from'react';import StickyFooter from'../StickyFooter';import'../App.css';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SiteSearch=()=>{const[query,setQuery]=useState('');const[templates,setTemplates]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[searchCompleted,setSearchCompleted]=useState(false);// Track if search is completed\nconst handleSearch=async()=>{setLoading(true);setError(null);setSearchCompleted(false);// Reset search completed state before starting a new search\nconst searchTerm=encodeURIComponent(`${query} website templates`);const site='themeforest.net';try{const response=await fetch(`https://api.envato.com/v1/discovery/search/search/item?term=${searchTerm}&site=${site}`,{headers:{'Authorization':`Bearer ${process.env.REACT_APP_ENVATO_API_KEY}`}});if(!response.ok){throw new Error('Failed to fetch data');}const data=await response.json();console.log('API Response:',data);console.log('Fetched apps:',data.matches);setTemplates(data.matches);}catch(error){console.error('Error fetching data:',error);setError('Error fetching data');}finally{setLoading(false);setSearchCompleted(true);// Mark search as completed\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"background-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Websites\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Search Category...\",className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{className:\"search-button\",onClick:handleSearch,disabled:loading,children:loading?'Searching...':'Search'})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"template-grid\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Searching...\"}):templates.length>0?templates.map(template=>/*#__PURE__*/_jsxs(\"div\",{className:\"template-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:template.name}),template.previews&&template.previews.landscape_preview&&/*#__PURE__*/_jsx(\"img\",{src:template.previews.landscape_preview.landscape_url,alt:template.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category: \",template.key_features]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Designer: \",template.author_username]}),/*#__PURE__*/_jsx(Link,{to:`/templates/${template.id}`,style:{color:'blue'},children:\"View Details\"})]})]},template.id)):searchCompleted?/*#__PURE__*/_jsx(\"p\",{children:\"No results found.\"}):null}),/*#__PURE__*/_jsx(StickyFooter,{})]});};export default SiteSearch;","map":{"version":3,"names":["React","useState","StickyFooter","Link","jsx","_jsx","jsxs","_jsxs","SiteSearch","query","setQuery","templates","setTemplates","loading","setLoading","error","setError","searchCompleted","setSearchCompleted","handleSearch","searchTerm","encodeURIComponent","site","response","fetch","headers","process","env","REACT_APP_ENVATO_API_KEY","ok","Error","data","json","console","log","matches","className","children","type","value","onChange","e","target","placeholder","onClick","disabled","length","map","template","name","previews","landscape_preview","src","landscape_url","alt","key_features","author_username","to","id","style","color"],"sources":["/Users/zeththomas/Documents/sincity-media/client/src/websites/SiteSearch.js"],"sourcesContent":["import React, { useState } from 'react';\nimport StickyFooter from '../StickyFooter'; \nimport '../App.css';\nimport { Link } from 'react-router-dom'; \n\nconst SiteSearch = () => {\n  const [query, setQuery] = useState('');\n  const [templates, setTemplates] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [searchCompleted, setSearchCompleted] = useState(false); // Track if search is completed\n\n  const handleSearch = async () => {\n    setLoading(true);\n    setError(null);\n    setSearchCompleted(false); // Reset search completed state before starting a new search\n\n    const searchTerm = encodeURIComponent(`${query} website templates`);\n    const site = 'themeforest.net'; \n\n    try {\n      const response = await fetch(`https://api.envato.com/v1/discovery/search/search/item?term=${searchTerm}&site=${site}`, {\n        headers: {\n          'Authorization': `Bearer ${process.env.REACT_APP_ENVATO_API_KEY}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch data');\n      }\n\n      const data = await response.json();\n      console.log('API Response:', data);\n      console.log('Fetched apps:', data.matches);\n      setTemplates(data.matches);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      setError('Error fetching data');\n    } finally {\n      setLoading(false);\n      setSearchCompleted(true); // Mark search as completed\n    }\n  };\n\n  return (\n    <div className='background-container'>\n      <h1 className='page-title'>Websites</h1>\n      <div className=\"search-container\">\n        <input\n          type=\"text\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          placeholder=\"Search Category...\"\n          className=\"search-input\"\n        />\n        <button className=\"search-button\" onClick={handleSearch} disabled={loading}>\n          {loading ? 'Searching...' : 'Search'}\n        </button>\n      </div>\n\n      {error && <p className=\"error-message\">{error}</p>}\n\n      <div className=\"template-grid\">\n        {loading ? (\n          <p>Searching...</p>\n        ) : templates.length > 0 ? (\n          templates.map(template => (\n            <div key={template.id} className=\"template-card\">\n              <div className=\"card-content\">\n                <h3>{template.name}</h3>\n                {template.previews && template.previews.landscape_preview && (\n                  <img src={template.previews.landscape_preview.landscape_url} alt={template.name} />\n                )}\n                <p>Category: {template.key_features}</p>\n              </div>\n              <div className=\"card-footer\">\n                <p>Designer: {template.author_username}</p>\n                <Link to={`/templates/${template.id}`} style={{ color: 'blue' }}>\n                  View Details\n                </Link>\n              </div>\n            </div>\n          ))\n        ) : searchCompleted ? (\n          <p>No results found.</p>\n        ) : null}\n      </div>\n\n      <StickyFooter />\n    </div>\n  );\n};\n\nexport default SiteSearch;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}