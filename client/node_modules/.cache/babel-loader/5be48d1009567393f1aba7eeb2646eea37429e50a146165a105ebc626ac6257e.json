{"ast":null,"code":"import React,{useState}from'react';import StickyFooter from'../StickyFooter';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppSearch=()=>{const[query,setQuery]=useState('');const[apps,setApps]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[searchCompleted,setSearchCompleted]=useState(false);// Track if search is completed\nconst handleSearch=async()=>{setLoading(true);setError(null);setSearchCompleted(false);// Reset search completed state before starting a new search\nconst appSearchTerm=encodeURIComponent(`${query} app`);const appSite='themeforest.net';try{const response=await fetch(`https://api.envato.com/v1/discovery/search/search/item?term=${appSearchTerm}&site=${appSite}`,{headers:{'Authorization':`Bearer ${process.env.REACT_APP_ENVATO_API_KEY}`}});if(!response.ok){throw new Error('Failed to fetch apps');}const data=await response.json();console.log('API Response:',data);console.log('Fetched apps:',data.matches);setApps(data.matches);}catch(error){console.error('Error fetching apps:',error);setError('Error fetching apps. Please try again later.');}finally{setLoading(false);setSearchCompleted(true);// Mark search as completed\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"background-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Apps\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Search Apps...\",className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{className:\"search-button\",onClick:handleSearch,disabled:loading,children:loading?'Searching...':'Search'})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"template-grid\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Searching...\"}):apps.length>0?apps.map(app=>{var _app$previews,_app$previews$landsca,_app$previews2,_app$previews2$icon_w;const hasLandscapePreview=(_app$previews=app.previews)===null||_app$previews===void 0?void 0:(_app$previews$landsca=_app$previews.landscape_preview)===null||_app$previews$landsca===void 0?void 0:_app$previews$landsca.landscape_url;const hasIconPreview=(_app$previews2=app.previews)===null||_app$previews2===void 0?void 0:(_app$previews2$icon_w=_app$previews2.icon_with_landscape_preview)===null||_app$previews2$icon_w===void 0?void 0:_app$previews2$icon_w.icon_url;return/*#__PURE__*/_jsxs(\"div\",{className:\"template-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:app.name}),hasLandscapePreview?/*#__PURE__*/_jsx(\"img\",{src:hasLandscapePreview,alt:`${app.name} landscape preview`,className:\"preview-image\"}):hasIconPreview?/*#__PURE__*/_jsx(\"img\",{src:hasIconPreview,alt:`${app.name} icon preview`,className:\"preview-image\"}):/*#__PURE__*/_jsx(\"p\",{children:\"No preview available\"})// Optional fallback if neither preview is available\n,/*#__PURE__*/_jsxs(\"p\",{children:[\"Category: \",app.classification]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Designer: \",app.author_username]}),/*#__PURE__*/_jsx(Link,{to:`/apps/${app.id}`,style:{color:'blue'},children:\"View Details\"})]})]},app.id);}):searchCompleted?/*#__PURE__*/_jsx(\"p\",{children:\"No results found.\"}):null}),/*#__PURE__*/_jsx(StickyFooter,{})]});};export default AppSearch;","map":{"version":3,"names":["React","useState","StickyFooter","Link","jsx","_jsx","jsxs","_jsxs","AppSearch","query","setQuery","apps","setApps","loading","setLoading","error","setError","searchCompleted","setSearchCompleted","handleSearch","appSearchTerm","encodeURIComponent","appSite","response","fetch","headers","process","env","REACT_APP_ENVATO_API_KEY","ok","Error","data","json","console","log","matches","className","children","type","value","onChange","e","target","placeholder","onClick","disabled","length","map","app","_app$previews","_app$previews$landsca","_app$previews2","_app$previews2$icon_w","hasLandscapePreview","previews","landscape_preview","landscape_url","hasIconPreview","icon_with_landscape_preview","icon_url","name","src","alt","classification","author_username","to","id","style","color"],"sources":["/Users/zeththomas/Documents/sincity-media/client/src/apps/AppSearch.js"],"sourcesContent":["import React, { useState } from 'react';\nimport StickyFooter from '../StickyFooter'; \nimport { Link } from 'react-router-dom'; \n\nconst AppSearch = () => {\n  const [query, setQuery] = useState('');\n  const [apps, setApps] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [searchCompleted, setSearchCompleted] = useState(false); // Track if search is completed\n\n  const handleSearch = async () => {\n    setLoading(true);\n    setError(null);\n    setSearchCompleted(false); // Reset search completed state before starting a new search\n\n    const appSearchTerm = encodeURIComponent(`${query} app`);\n    const appSite = 'themeforest.net';\n\n    try {\n      const response = await fetch(`https://api.envato.com/v1/discovery/search/search/item?term=${appSearchTerm}&site=${appSite}`, {\n        headers: {\n          'Authorization': `Bearer ${process.env.REACT_APP_ENVATO_API_KEY}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch apps');\n      }\n\n      const data = await response.json();\n      console.log('API Response:', data);\n      console.log('Fetched apps:', data.matches);\n      \n      setApps(data.matches);\n    } catch (error) {\n      console.error('Error fetching apps:', error);\n      setError('Error fetching apps. Please try again later.');\n    } finally {\n      setLoading(false);\n      setSearchCompleted(true); // Mark search as completed\n    }\n  };\n\n  return (\n    <div className='background-container'>\n      <h1 className='page-title'>Apps</h1>\n      <div className=\"search-container\">\n        <input\n          type=\"text\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          placeholder=\"Search Apps...\"\n          className=\"search-input\"\n        />\n        <button className=\"search-button\" onClick={handleSearch} disabled={loading}>\n          {loading ? 'Searching...' : 'Search'}\n        </button>\n      </div>\n\n      {error && <p className=\"error-message\">{error}</p>}\n\n      <div className=\"template-grid\">\n        {loading ? (\n          <p>Searching...</p>\n        ) : apps.length > 0 ? (\n          apps.map(app => {\n            const hasLandscapePreview = app.previews?.landscape_preview?.landscape_url;\n            const hasIconPreview = app.previews?.icon_with_landscape_preview?.icon_url;\n\n            return (\n              <div key={app.id} className=\"template-card\">\n                <div className=\"card-content\">\n                  <h3>{app.name}</h3>\n                  \n                  {/* Render landscape preview if available, otherwise render icon */}\n                  {hasLandscapePreview ? (\n                    <img\n                      src={hasLandscapePreview}\n                      alt={`${app.name} landscape preview`}\n                      className=\"preview-image\"\n                    />\n                  ) : hasIconPreview ? (\n                    <img\n                      src={hasIconPreview}\n                      alt={`${app.name} icon preview`}\n                      className=\"preview-image\"\n                    />\n                  ) : (\n                    <p>No preview available</p> // Optional fallback if neither preview is available\n                  )}\n                  \n                  <p>Category: {app.classification}</p>\n                </div>\n                <div className=\"card-footer\">\n                  <p>Designer: {app.author_username}</p>\n                  {/* Add link to app details page */}\n                  <Link to={`/apps/${app.id}`} style={{ color: 'blue' }}>View Details</Link>\n                </div>\n              </div>\n            );\n          })\n        ) : searchCompleted ? (\n          <p>No results found.</p>\n        ) : null}\n      </div>\n      <StickyFooter />\n    </div>\n  );\n};\n\nexport default AppSearch;\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}